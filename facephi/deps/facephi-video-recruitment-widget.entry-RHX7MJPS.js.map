{
  "version": 3,
  "sources": ["../../@facephi/sdk-web-wc/dist/esm/src/components/video-recruitment-widget/video-recruitment-widget.css?tag=facephi-video-recruitment-widget&encapsulation=shadow", "../../@facephi/sdk-web-wc/dist/esm/src/components/video-recruitment-widget/video-recruitment-widget.tsx"],
  "sourcesContent": [":host {\n  flex: 1;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  margin: 0; \n  padding: 0;\n}\n", "/* eslint-disable @typescript-eslint/no-unused-vars */\nimport '@facephi/sdk-video-recruitment';\nimport { Component, Element, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { FacephiSdkProviderCustomEvent } from '../../components';\nimport { ERRORS } from '../../state/constants';\nimport { LicenseComponents, TrackingReason, TrackingStatus, TrackingSteps } from '../../state/model';\nimport state, { onChange } from '../../state/store';\n\n@Component({\n  tag: 'facephi-video-recruitment-widget',\n  styleUrl: 'video-recruitment-widget.css',\n  shadow: true,\n})\nexport class VideoRecruitmentWidget {\n  @Element() host: HTMLElement;\n\n  @Prop() fullScreen: boolean;\n  @Prop() language: string;\n\n  @State() loading = true;\n  @State() error: string;\n  @State() operationId: string;\n  @State() tenantId: string;\n  @State() videoOptions: { baseUrl: string; apiKey: string };\n\n  @State() component;\n\n  disconnectComponent;\n\n  @Watch('component')\n  updateComponent(newValue) {\n    if (newValue) {\n      this.videoOptions = { apiKey: newValue.parameters.apiKey, baseUrl: newValue.parameters.baseUrl };\n      this.loading = false;\n      this.error = undefined;\n    } else {\n      this.loading = false;\n      this.error = ERRORS.VIDEO_RECRUITMENT_NOT_LICENSED;\n    }\n  }\n\n  connectedCallback() {\n    if (state.components) {\n      this.component = state.components[LicenseComponents.videoRecruitment] ?? null;\n      this.tenantId = state.components[LicenseComponents.tracking]?.parameters?.tenantId;\n    }\n\n    this.disconnectComponent = onChange('components', components => {\n      this.component = components[LicenseComponents.videoRecruitment] ?? null;\n      this.tenantId = components[LicenseComponents.tracking]?.parameters?.tenantId;\n    });\n  }\n\n  private sdkProvider: HTMLFacephiSdkProviderElement;\n\n  private handleUserCancel() {\n    if (this.sdkProvider) {\n      this.sdkProvider.trackingStatus(TrackingStatus.cancelled, TrackingReason.videoRecruitmentCancelUser);\n    }\n  }\n\n  private handleOperationId(event: FacephiSdkProviderCustomEvent<string>) {\n    this.operationId = event.detail;\n  }\n\n  @Watch('operationId')\n  watchOperationId() {\n    if (this.operationId) {\n      this.sdkProvider.trackingEvent(TrackingSteps.videoRecruitmentWidget, TrackingSteps.videoRecruitmentWidget);\n      this.loading = false;\n    }\n  }\n\n  async componentWillLoad() {\n    await customElements.whenDefined('facephi-sdk-provider');\n    this.sdkProvider = document.querySelector('facephi-sdk-provider');\n    this.sdkProvider.addEventListener('emitOperationId', this.handleOperationId.bind(this));\n\n    this.host.addEventListener('userCancel', this.handleUserCancel.bind(this));\n  }\n\n  disconnectedCallback() {\n    this.sdkProvider.removeEventListener('emitOperationId', this.handleOperationId);\n    this.host.removeEventListener('userCancel', this.handleUserCancel);\n    this.disconnectComponent();\n  }\n\n  render() {\n    return (\n      <Host>\n        {!this.loading ? (\n          this.error ? (\n            <p>{this.error}</p>\n          ) : (\n            <video-recruitment\n              fullScreen={this.fullScreen}\n              language={this.language}\n              operationId={this.operationId}\n              tenantId={this.tenantId}\n              apiKey={this.videoOptions?.apiKey}\n              apiUrl={`wss://${this.videoOptions?.baseUrl}/identification`}\n            />\n          )\n        ) : null}\n      </Host>\n    );\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA,IAAM,4BAA4B;ICarB,yBAAsB,MAAA;;;;;mBAMd;;;;;;;EAWnB,gBAAgB,UAAQ;AACtB,QAAI,UAAU;AACZ,WAAK,eAAe,EAAE,QAAQ,SAAS,WAAW,QAAQ,SAAS,SAAS,WAAW,QAAO;AAC9F,WAAK,UAAU;AACf,WAAK,QAAQ;WACR;AACL,WAAK,UAAU;AACf,WAAK,QAAQ,OAAO;;;EAIxB,oBAAiB;;AACf,QAAI,MAAM,YAAY;AACpB,WAAK,aAAY,KAAA,MAAM,WAAW,kBAAkB,gBAAgB,OAAC,QAAA,OAAA,SAAA,KAAI;AACzE,WAAK,YAAW,MAAA,KAAA,MAAM,WAAW,kBAAkB,QAAQ,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,gBAAU,QAAA,OAAA,SAAA,SAAA,GAAE;;AAG5E,SAAK,sBAAsB,SAAS,cAAc,gBAAU;;AAC1D,WAAK,aAAYA,MAAA,WAAW,kBAAkB,gBAAgB,OAAC,QAAAA,QAAA,SAAAA,MAAI;AACnE,WAAK,YAAWC,OAAAC,MAAA,WAAW,kBAAkB,QAAQ,OAAC,QAAAA,QAAA,SAAA,SAAAA,IAAE,gBAAU,QAAAD,QAAA,SAAA,SAAAA,IAAE;KACrE;;EAKK,mBAAgB;AACtB,QAAI,KAAK,aAAa;AACpB,WAAK,YAAY,eAAe,eAAe,WAAW,eAAe,0BAA0B;;;EAI/F,kBAAkB,OAA4C;AACpE,SAAK,cAAc,MAAM;;EAI3B,mBAAgB;AACd,QAAI,KAAK,aAAa;AACpB,WAAK,YAAY,cAAc,cAAc,wBAAwB,cAAc,sBAAsB;AACzG,WAAK,UAAU;;;EAInB,MAAM,oBAAiB;AACrB,UAAM,eAAe,YAAY,sBAAsB;AACvD,SAAK,cAAc,SAAS,cAAc,sBAAsB;AAChE,SAAK,YAAY,iBAAiB,mBAAmB,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAEtF,SAAK,KAAK,iBAAiB,cAAc,KAAK,iBAAiB,KAAK,IAAI,CAAC;;EAG3E,uBAAoB;AAClB,SAAK,YAAY,oBAAoB,mBAAmB,KAAK,iBAAiB;AAC9E,SAAK,KAAK,oBAAoB,cAAc,KAAK,gBAAgB;AACjE,SAAK,oBAAmB;;EAG1B,SAAM;;AACJ,WACE,EAAC,MAAI,MACF,CAAC,KAAK,UACL,KAAK,QACH,EAAA,KAAA,MAAI,KAAK,KAAK,IAEd,EAAA,qBAAA,EACE,YAAY,KAAK,YACjB,UAAU,KAAK,UACf,aAAa,KAAK,aAClB,UAAU,KAAK,UACf,SAAQ,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,QAC3B,QAAQ,UAAS,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,OAAO,kBAAiB,CAAA,IAG9D,IAAI;;;;;;;;;;;;;",
  "names": ["_a", "_c", "_b"]
}
